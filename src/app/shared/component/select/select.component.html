<form id="form">
  <mat-form-field class="select-list" appearance="fill" (click)="searchInput.focus()">
    <mat-label>{{ label }}</mat-label>
    <mat-chip-grid #chipGrid aria-label="selection">
      <mat-chip-row *ngFor="let item of valuesSelected" (removed)="remove(item)">
        {{item.name}}
        <button matChipRemove [attr.aria-label]="'remove ' + item">
          <mat-icon>cancel</mat-icon>
        </button>
      </mat-chip-row>
    </mat-chip-grid>
    <input #searchInput [matChipInputFor]="chipGrid" (focus)="open = true"
      [placeholder]="placeholder ?? ('Components.Select.Placeholder' | translate)"/>
  </mat-form-field>

  <mat-list class="list" *ngIf="open">
    <mat-option *ngIf="(items | filterSearch: searchInput.value).length == 0">
      {{'Components.Select.NoResultsFound' | translate}}
    </mat-option>
    <mat-option *ngIf="(searchInput.value == '') && (items.length != 0)"
      (click)="toggleSelectAll()">
      <mat-checkbox [indeterminate]="indeterminated()" [checked]="selectAll">
        {{ 'Components.Select.' + (!selectAll ? 'SelectAll' : 'RemoveAll') | translate }}
      </mat-checkbox>
    </mat-option>
    <mat-list-item *ngFor="let item of items | filterSearch: searchInput.value">
      <mat-option [value]="item.value" (click)="selected(item.value)">
        <mat-checkbox [checked]="checked(item.value)">{{item.name}}</mat-checkbox>
      </mat-option>
    </mat-list-item>
  </mat-list>
</form>



